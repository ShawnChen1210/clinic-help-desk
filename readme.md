WELCOME TO CLINIC HELP DESK!
-
*Created by Shawn Chen, feel free to connect with me on linked at https://www.linkedin.com/in/shawn-chen-66a2b2314/*

Overall Project Architecture:
-
- The project is built with Django and React
- A method of React serving static files to the client is used for the django-react integration, meaning no seperate server for the frontend, everything runs from one server. To this end, every time a change is made in the /frontend/, in the terminal cd to frontend and run "npm run build" to build and register your changes so it can be seen in the django development server.
- User authentication is done with django's built in authentication, inside the 'registration' app
- Everything spreadsheet related is coded in react, with the 'api' app being used to handle all calls
- You have access to tailwind css in both the django templates and react frontend app.
- I am not the best at React! I learned it along the way when developing, so it might not contain the best practices. Feel free to restructure anything if it is not up to standard
- **Google Sheets** is used as the database for storing the spreadsheets.

Registration Overview:
- 
- Default user fields used from django's user model: username, first_name, last_name, email, password (obviously)
- Additional fields in UserProfile model: is_verified (used to grant users access to Clinic Help Desk)
- template_activate_account.html contains the html template served to registration confirmation emails

Google Sheets Overview:
-
- All sheets generated by the site can be found in the shared drive of Clinic Help Desk. You can access it via the Marketing Therapy on the Go account.
- A google cloud service account, *chd-service-account@clinic-help-desk.iam.gserviceaccount.com*, is used to create, update, and delete files inside this shared drive via API calls.
- Every user, when creating a new spreadsheet, creates a new google sheets file, NOT a new tab inside a google sheets file. This is essential for many many parts of the code logic, as 'Sheet1', the default name for the main sheet tab in google sheets after creating a google sheet file, is used to do read and write api operations on the entire sheet. The tab value **Must Not** be changed manually in google sheets, warning for developers and users alike.
- api/utils.py inside the api django app contains functions for building google credential objects, which is used to do all API operations and provide verification.
- api/services/google_sheets.py contains functions for doing API call CRUD operations with the google sheet. feel free to add more files inside the services folder if other services are used.

Production Workflow:
-
Local Editor:
1. pip freeze > requirements.txt
2. git add .
3. git commit blah blah blah
4. git push origin main
5. python manage.py makemigrations (if you changed models)

DigitalOcean Droplet:
1. source .venv/bin/activate
2. git pull origin main
3. pip install -r requirements.txt
4. cd frontend, then: npm install + npm run build
5. add new .env variables (if any)
6. python manage.py migrate (if there are new migrations)
7. python manage.py collectstatic
8. sudo systemctl restart gunicorn && sudo systemctl restart nginx
9. test if website works on 138.197.214.136
